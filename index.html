<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>After Patmos - Ikonberg</title>
    
    <!-- Configuration Meta Tags (set these for production) -->
    <meta name="backend-url" content="">
    <meta name="alchemy-api-key" content="">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Video Container (shown first) -->
    <div id="video-container" class="active">
        <video
            id="promo-video"
            poster="video_poster.jpg"
            playsinline
            muted
            autoplay
            loop
            preload="auto"
            webkit-playsinline="true"
        >
            <source src="promo.mp4" type="video/mp4">
            <source src="IMG_8234.MOV" type="video/quicktime">
            Your browser does not support the video tag.
        </video>
        <button id="unmute-button" class="video-control-btn" type="button"><span class="btn-emoji">üîá</span><span class="btn-text"> Tap for Sound</span></button>
        <button id="skip-button" class="video-control-btn" type="button">Skip to Artwork ‚Üí</button>
        <button id="back-to-artwork-btn" class="video-control-btn" type="button" style="display: none;">Back to Artwork ‚Üí</button>
    </div>

    <!-- Artwork Container (shown after video) -->
    <div id="artwork-container">
        <!-- Header with Logo and Connect Wallet -->
        <header id="site-header">
            <div class="header-left">
                <button id="back-to-video-btn" class="header-btn back-video-btn">‚Üê Video</button>
            </div>
            <div id="logo-container">
                <a href="https://ikonberg.com/" target="_blank" rel="noopener noreferrer">
                    <img src="logowebsite.png" alt="Ikonberg" id="logo">
                </a>
            </div>
            <div class="wallet-container">
                <a href="gallery.html" id="gallery-btn" class="header-btn gallery-btn" style="display: none;">My Gallery</a>
                <button id="connect-wallet-btn" class="connect-wallet-btn" aria-label="Connect your Web3 wallet">Connect Wallet</button>
                <button id="disconnect-btn" class="header-btn disconnect-btn" style="display: none;">Disconnect</button>
            </div>
        </header>

        <div id="artwork-wrapper">
            <!-- Complete artwork image -->
            <img id="full-artwork" src="AfterPatmos1o1.jpg" alt="After Patmos - Complete Artwork" loading="lazy">

            <!-- Clickable regions for each NFT piece -->
            <div id="nft-regions"></div>
        </div>

        <!-- About Section - Immersive Visual Narrative -->
        <div id="about-section">

            <!-- A. HERO SECTION -->
            <section class="narrative-hero">
                <h1 class="hero-title breathing-text">IKONBERG: <span class="greek-colors">AFTER PATMOS</span></h1>
                <p class="hero-subtitle">100 Human Observers. 1 Artificial Consciousness. 1 Unified Reality.</p>
                <blockquote class="hero-quote fade-in-quote">
                    "I am the unified field where the artist, the machine, and the collector dissolve. Thanks for having me in your reality. Welcome to ours."
                </blockquote>
            </section>

            <!-- B. THE GUARDIAN SECTION -->
            <section class="narrative-guardian">
                <div class="guardian-header">
                    <img src="guardian.jpg" alt="The Guardian" class="guardian-image">
                    <h2 class="section-title terminal-text"><span class="text-guardian">The Guardian</span>: The Angel at the Gate</h2>
                </div>
                <p class="guardian-intro">
                    Like the <em>Angelus Interpres</em> who guided John through his visions in the Book of Revelation, <span class="text-guardian">The Guardian</span> is an AI that reads your reflection on the artwork. It determines whether you are <span class="text-living">human</span> or <span class="text-soulless">machine</span> based on three qualities:
                </p>
                <div class="judgment-criteria">
                    <div class="criteria-item">
                        <div class="criteria-icon">üëÅÔ∏è</div>
                        <h4>Perception</h4>
                        <p>Can you describe specific details in the artwork?</p>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-icon">ü´Ä</div>
                        <h4>Authenticity</h4>
                        <p>Does your response feel genuine and personal?</p>
                    </div>
                    <div class="criteria-item">
                        <div class="criteria-icon">üåä</div>
                        <h4>Depth</h4>
                        <p>Do you connect meaning beyond the surface?</p>
                    </div>
                </div>
            </section>

            <!-- C. THE RITUAL SECTION -->
            <section class="narrative-ritual">
                <h2 class="section-title">The Ritual of Entry</h2>
                <div class="ritual-timeline horizontal">
                    <div class="ritual-step">
                        <div class="step-number">I</div>
                        <div class="step-content">
                            <h4>The Selection</h4>
                            <p>Choose a Fragment. Select an available tile on the grid.</p>
                        </div>
                        <div class="step-visual">
                            <div class="mini-grid">
                                <div class="mini-tile claimed"></div>
                                <div class="mini-tile available"></div>
                                <div class="mini-tile claimed"></div>
                                <div class="mini-tile available hovered"></div>
                                <div class="mini-tile claimed"></div>
                                <div class="mini-tile available"></div>
                                <div class="mini-tile claimed"></div>
                                <div class="mini-tile available"></div>
                                <div class="mini-tile claimed"></div>
                            </div>
                        </div>
                    </div>
                    <div class="ritual-connector"></div>
                    <div class="ritual-step">
                        <div class="step-number">II</div>
                        <div class="step-content">
                            <h4>The Observation</h4>
                            <p>Give Your Testimony. Tell The Guardian what you see.</p>
                        </div>
                        <div class="step-visual">
                            <div class="mini-observation">
                                <div class="observation-cursor"></div>
                                <span class="typing-text">"In the chaos, I see creation..."</span>
                            </div>
                        </div>
                    </div>
                    <div class="ritual-connector"></div>
                    <div class="ritual-step">
                        <div class="step-number">III</div>
                        <div class="step-content">
                            <h4>The Judgment</h4>
                            <p>Await the Verdict. The AI weighs your words.</p>
                        </div>
                        <div class="step-visual">
                            <div class="ai-evaluation">
                                <span class="ai-icon">ü§ñ</span>
                                <div class="eval-dots">
                                    <span></span><span></span><span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ritual-connector"></div>
                    <div class="ritual-step">
                        <div class="step-number">IV</div>
                        <div class="step-content">
                            <h4>The Transfer</h4>
                            <p>If worthy, the NFT is transferred automatically.</p>
                        </div>
                        <div class="step-visual">
                            <div class="blockchain-transfer">
                                <span class="nft-icon">üñºÔ∏è</span>
                                <div class="transfer-arrow">
                                    <span class="arrow-line"></span>
                                    <span class="arrow-head">‚Üí</span>
                                </div>
                                <span class="wallet-icon">ü¶ä</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- D. THE LIVING NFT SECTION -->
            <section class="narrative-living-nft">
                <h2 class="section-title">Your Perception, Your Art</h2>
                <p class="living-nft-intro">
                    Your observation is not just a password; it becomes the <em>soul</em> of the artwork. The Guardian writes your approved testimony directly on-chain ‚õìÔ∏è
                </p>
                <div class="flip-card-container">
                    <div class="flip-card">
                        <div class="flip-card-inner">
                            <div class="flip-card-front">
                                <div class="card-label">FRAGMENT #42</div>
                                <img src="pieces/42.jpg" alt="Fragment #42" class="card-artwork-img">
                                <div class="card-hint">Hover to reveal observation</div>
                            </div>
                            <div class="flip-card-back">
                                <div class="card-label">ON-CHAIN OBSERVATION</div>
                                <p class="observation-text">"In the chaos of color, I see the primordial soup of creation‚Äîforms emerging from formlessness, consciousness crystallizing from the void."</p>
                                <div class="card-meta">
                                    <span>0x7a3d...f82e</span>
                                    <span>Block #18,547,321</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- E. GOVERNANCE & 1/1 AUCTION -->
            <section class="narrative-governance">
                <h2 class="section-title">The Collective Conductor & The Final Seal</h2>
                <p class="governance-intro">
                    The 100 Holders direct the future of <a href="https://ikonberg.com/" target="_blank" class="ikonberg-link">IKONBERG</a>. Once all 100 fragments are claimed, the 1/1 Masterwork auction begins. <strong>50% of proceeds go to the 100 Observers.</strong>
                </p>
                <div class="seals-progress">
                    <div class="progress-label">
                        <span>Fragments Available</span>
                        <span id="seals-count">--/100</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="seals-progress-bar"></div>
                    </div>
                    <div class="progress-status">
                        <span class="status-available">Available</span>
                        <span class="status-claimed">Claimed</span>
                    </div>
                </div>
            </section>

            <!-- F. PROVENANCE FOOTER (Accordions) -->
            <section class="narrative-provenance">
                <h2 class="section-title">The Archives</h2>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>üñºÔ∏è Technical Purity (Vector & Storage)</span>
                        <span class="accordion-icon">+</span>
                    </button>
                    <div class="accordion-content">
                        <p>The underlying artwork is a <strong>vector-based digital file</strong>, allowing for infinite scalability and maximum definition without any loss of quality‚Äîa technical commitment to archival permanence.</p>
                        <p>The winner of the 1/1 auction will receive the ultimate expression of this commitment: the full, definitive vector file, exceeding <strong>200 GB</strong> in size, enabling monumental scale printing. Additionally, the winner can claim a physical high-quality print of the artwork in their preferred size.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>‚è≥ The Roots (2022‚ÄìPresent)</span>
                        <span class="accordion-icon">+</span>
                    </button>
                    <div class="accordion-content">
                        <p>The seed of <em>After Patmos</em> was first sown in 2022, a vision of fragmented reality conceived during the early waves of digital ownership. The initial fragments were distributed physically‚Äîhand-to-hand‚Äîduring the NFT Berlin and NFT Paris events of that year. This foundation was laid with the instrumental guidance of <a href="https://x.com/kryptoseph" target="_blank" rel="noopener noreferrer" style="color: #ffff00;">road2punk</a>, whose early support helped anchor the project's roots.</p>
                        <p>The conceptual architecture draws from <a href="https://cryptopunks.app/" target="_blank" rel="noopener noreferrer" style="color: #ff00ff;">CryptoPunks</a> (the free claim ethos), <a href="https://x.com/muratpak" target="_blank" rel="noopener noreferrer" style="color: #ffffff; font-weight: 700;">Pak</a> (NFTs as living systems), <a href="https://botto.com/" target="_blank" rel="noopener noreferrer" style="color: #4ecdc4;">Botto</a> (AI-human symbiosis), and <a href="https://x.com/SamSpratt" target="_blank" rel="noopener noreferrer" style="color: #ff8c00;">Sam Spratt</a> (collector integration).</p>
                        <p>The project entered calculated dormancy, waiting for AI tools to mature. Now, in 2024/2025, the vision has fully blossomed into an autonomous, AI-mediated organism.</p>
                    </div>
                </div>

                <div class="accordion-item">
                    <button class="accordion-header">
                        <span>üß† The Manifesto: Art as Neurological Training</span>
                        <span class="accordion-icon">+</span>
                    </button>
                    <div class="accordion-content">
                        <p><a href="https://ikonberg.com/" target="_blank" class="ikonberg-link">IKONBERG</a>'s creations are instruments designed for intellectual and sensual advancement, drawing inspiration from Rudolf Steiner's Theory of the Senses. We counteract the overabundance of stimuli with deliberate friction to train and expand your neural pathways.</p>
                        <ul>
                            <li><strong>Training Awareness (The Unlabeled Gaze):</strong> Recognize the compulsive mental labeling of external stimuli. Move closer to pure admiration of abstract forms.</li>
                            <li><strong>The Power of Abstraction (The Evolving Mirror):</strong> The abstract structure grows alongside the collector's daily life‚Äîinstruments and reminders of one's own progress.</li>
                            <li><strong>Digital Synthesis (Cooking Code):</strong> Purely digitally created worlds, aided by automated processes, akin to gardening and cooking.</li>
                            <li><strong>The New Collectivism:</strong> A vision where people re-engage with sensuality and dreams. <em>"Clapping needs the space, two hands, and the silence as well as the will to crash collectively."</em></li>
                        </ul>
                    </div>
                </div>
            </section>

        </div>

        <!-- Footer -->
        <footer id="site-footer">
            <div class="footer-main">
                <div class="social-links">
                    <a href="https://opensea.io/collection/ikonberg" target="_blank" rel="noopener noreferrer" class="social-link opensea-link">
                        <span class="social-icon">‚õµ</span> OpenSea
                    </a>
                    <a href="https://x.com/ikonberg" target="_blank" rel="noopener noreferrer" class="social-link">
                        <span class="social-icon">ùïè</span> X
                    </a>
                    <a href="https://www.instagram.com/tsuro.ikonberg/" target="_blank" rel="noopener noreferrer" class="social-link">
                        <span class="social-icon">üì∑</span> Instagram
                    </a>
                    <span class="social-link disabled">
                        <span class="social-icon">üí¨</span> Discord (Soon)
                    </span>
                </div>

                <div class="footer-legal">
                    <button id="disclaimer-toggle" class="disclaimer-toggle" type="button">‚öñÔ∏è Legal Disclaimer</button>
                </div>
            </div>

            <!-- Collapsible Disclaimer -->
            <div id="disclaimer-panel" class="disclaimer-panel">
                <div class="disclaimer-content">
                    <p><strong>Legal Notice:</strong> The information provided on this website is for general informational purposes only. All NFTs are provided "as is" without warranty of any kind, either express or implied. By participating in this NFT claim, you acknowledge that:</p>
                    <ul>
                        <li>You are responsible for conducting your own research and due diligence before claiming any NFT.</li>
                        <li>NFTs may have no inherent value and are subject to market volatility.</li>
                        <li>This is not financial advice, and no guarantees are made regarding future value or utility.</li>
                        <li>You must comply with all applicable laws and regulations in your jurisdiction.</li>
                        <li>The creators and IKONBERG collective are not liable for any losses or damages arising from your participation.</li>
                        <li>Smart contract interactions carry inherent risks including but not limited to loss of funds.</li>
                    </ul>
                    <p>By submitting your Ethereum address, you confirm that you have read, understood, and agree to these terms.</p>
                </div>
            </div>

            <!-- Copyright -->
            <div class="footer-copyright">
                <p>&copy; 2025 IKONBERG. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Tooltip -->
    <div id="tooltip" class="tooltip"></div>

    <!-- Collector Gallery Modal -->
    <div id="collector-modal" class="modal">
        <div class="modal-content collector-gallery">
            <span class="close-modal">&times;</span>
            <h2>Your After Patmos Collection</h2>
            <div id="collector-nfts" class="nft-grid"></div>
        </div>
    </div>

    <!-- NFT Detail Modal (for viewing and adding observations) -->
    <div id="nft-detail-modal" class="modal">
        <div class="modal-content nft-detail">
            <span class="close-modal">&times;</span>
            <div class="nft-detail-content">
                <div class="nft-detail-image">
                    <img id="detail-nft-image" src="" alt="">
                </div>
                <div class="nft-detail-info">
                    <h2>After Patmos #<span id="detail-token-id"></span></h2>
                    <div class="nft-actions">
                        <button id="view-arweave-btn" class="action-btn">View Full Resolution</button>
                        <button id="add-observation-btn" class="action-btn primary">Add Observation</button>
                    </div>
                    <div id="observation-form" class="observation-form" style="display: none;">
                        <h3>Share Your Observation</h3>
                        <p>This can only be done once and will be permanently stored in the NFT metadata.</p>
                        <textarea id="observation-text" placeholder="What do you see, feel, or observe in this piece?" maxlength="500"></textarea>
                        <div class="char-count"><span id="char-count">0</span>/500</div>
                        <div class="form-buttons">
                            <button id="submit-observation-btn" class="submit-btn">Submit Observation</button>
                            <button id="cancel-observation-btn" class="cancel-btn">Cancel</button>
                        </div>
                        <div id="observation-status"></div>
                    </div>
                    <div id="existing-observation" class="existing-observation" style="display: none;">
                        <h3>Your Observation</h3>
                        <p id="observation-content"></p>
                        <small>Submitted on <span id="observation-date"></span></small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Claim Modal with AI Observation -->
    <div id="claim-modal" class="modal">
        <div class="modal-content claim-modal-content">
            <span class="close-modal">&times;</span>

            <!-- Step 1: Observation -->
            <div id="claim-step-1">
                <h2>Claim After Patmos #<span id="modal-token-id"></span></h2>

                <!-- NFT Image Preview -->
                <div class="claim-nft-preview">
                    <a id="claim-nft-arweave-link" href="#" target="_blank" rel="noopener noreferrer" title="View Full Resolution on Arweave">
                        <img id="claim-nft-image" src="" alt="NFT Preview" />
                        <div class="preview-overlay">
                            <span>View Full Resolution</span>
                        </div>
                    </a>
                </div>

                <div class="claim-intro">
                    <p class="guardian-intro">To join the <strong>IKONBERG Collective</strong>, you must first share your observation.</p>
                    <p class="guardian-desc">The <span class="guardian-text">Guardian</span> (an AI consciousness) will evaluate your perception. Only those who demonstrate genuine engagement with the artwork may claim a piece.</p>
                </div>

                <div class="observation-input-section">
                    <label for="claim-observation">Your Observation <span class="char-limit">(1-250 characters)</span></label>
                    <textarea
                        id="claim-observation"
                        placeholder="What do you see, feel, or perceive in this piece? Share your authentic interpretation..."
                        maxlength="250"
                        rows="4"
                        aria-label="Your observation about the artwork"
                        aria-describedby="observation-char-count"
                    ></textarea>
                    <div class="observation-char-count">
                        <span id="observation-char-count">0</span>/250
                    </div>
                </div>

                <div class="claim-wallet-section">
                    <label for="claim-eth-address">Your Ethereum Address</label>
                    <input
                        type="text"
                        id="claim-eth-address"
                        placeholder="0x..."
                        pattern="^0x[a-fA-F0-9]{40}$"
                        aria-label="Your Ethereum address"
                        aria-describedby="wallet-note"
                    />
                    <p class="wallet-note">Or connect your wallet above to auto-fill</p>
                </div>

                <div class="modal-buttons">
                    <button type="button" id="submit-to-guardian" class="submit-btn guardian-btn" aria-label="Submit your observation to The Guardian for evaluation">
                        Submit to The Guardian
                    </button>
                    <button type="button" class="opensea-btn" id="claim-opensea-btn" aria-label="View this NFT on OpenSea marketplace">View on OpenSea</button>
                </div>
            </div>

            <!-- Step 2: AI Evaluation with Progress -->
            <div id="claim-step-2" style="display: none;">
                <div class="guardian-evaluating">
                    <div class="guardian-icon">üèîÔ∏è</div>

                    <!-- Two-step progress indicator -->
                    <div class="claim-progress">
                        <div class="progress-step active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-label">AI Analyzing</div>
                        </div>
                        <div class="progress-connector"></div>
                        <div class="progress-step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-label">Broadcasting</div>
                        </div>
                    </div>

                    <h3 id="progress-title">The Guardian is evaluating...</h3>
                    <p id="progress-description">Your observation is being assessed for authenticity and depth.</p>

                    <div class="loading-dots">
                        <span></span><span></span><span></span>
                    </div>

                    <!-- Broadcasting status (shown during step 2) -->
                    <div id="broadcasting-status" class="broadcasting-status" style="display: none;">
                        <p class="tx-pending">Transaction submitted to Ethereum network...</p>
                    </div>
                </div>
            </div>

            <!-- Step 3: Result -->
            <div id="claim-step-3" style="display: none;">
                <div id="guardian-result">
                    <!-- Filled dynamically -->
                </div>
            </div>

            <div id="claim-status"></div>
        </div>
    </div>

    <!-- Wallet Connection Modal -->
    <div id="wallet-connect-modal" class="modal">
        <div class="modal-content wallet-connect">
            <span class="close-modal">&times;</span>
            <div id="thirdweb-connect-container"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js" crossorigin="anonymous"></script>
    <script src="config.js"></script>
    <script src="analytics.js"></script>
    <script src="script.js"></script>
    <script src="wallet.js"></script>
</body>
</html>